{{template "header.html" .}}
{{template "navbar.html" .}}

<div class="container">
    <div class="posts">
        {{if .Data}}
        {{range .Data}}
        <div class="post">
            <div class="post-body">
                <a href="/post/{{.ID}}" class="post-title">{{.Title}}</a>
                <div class="post-header">by :
                    <p class="post-user">{{.UserName}} </p>
                    <span></span>
                    <p class="post-time"> at : {{.CreatedAt}} </p>
                </div>
                <br>
                <!-- <p class="post-title">{{.Title}} </p> -->
                <p class="post-content" id="post-content-home">{{.Content}} </p>
                <div class="post-categories">
                    {{range .Categories}}
                    <span class="post-category">#{{.}}</span>
                    {{end}}
                </div>
            </div>
            <div class="post-footer">

                <div class="post-footer">

                    <button id="likescount{{.ID}}" onclick="postreaction('{{.ID}}','like')"
                        class="post-like post-footer-hover"><i class="fa-regular fa-thumbs-up"></i>{{.Likes}}</button>
                    <button id="dislikescount{{.ID}}" onclick="postreaction('{{.ID}}','dislike')"
                        class="post-dislike post-footer-hover"><i
                            class="fa-regular fa-thumbs-down"></i>{{.Dislikes}}</button>
                </div>
                <a href="/post/{{.ID}}" class="post-comments post-footer-hover">
                    <i class="fa-regular fa-comment"></i>{{.Comments}}
                </a>
            </div>
            <span style="color:red" id="errorlogin{{.ID}}"></span>
        </div>
        {{end}}
        {{else}}
        <p class="no-posts">No posts available to display !</p>
        {{end}}
        <style>
            .pagination {
                display: inline-block;
            }

            .pagination * {
                color: black;
                float: left;
                padding: 8px 16px;
                text-decoration: none;
            }
        </style>

        <div class="pagination">
            <a onclick="pagination('back', `{{if .Data}}true{{end}}`)" class="back" href="#">&laquo;
                Back</a>
            <span class="currentpage">1</span>
            <a onclick="pagination('next', `{{if .Data}}true{{end}}`)" class="next" href="#">Next
                &raquo;</a>
        </div>
    </div>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        if (urlParams.get('PageID') == 0) {
            window.location.href = "/";
        }
        document.querySelector(".currentpage").innerText = urlParams.get('PageID') > 0 ? urlParams.get('PageID') : 1
    </script>
    
</div>
{{template "footer.html"}}

